// Comprehensive Ayurvedic Glossary for Tooltips
// Sourced from classical texts and modern practice

export const AYURVEDIC_GLOSSARY = {
  // Core Concepts
  'Dosha': 'Bio-energies (Vata, Pitta, Kapha) that govern all physiological and psychological functions',
  'Doshas': 'Bio-energies (Vata, Pitta, Kapha) that govern all physiological and psychological functions',
  'Vata': 'Air + Space dosha governing movement, circulation, nervous system. Qualities: dry, light, cold, rough, mobile',
  'Pitta': 'Fire + Water dosha governing metabolism, digestion, transformation. Qualities: hot, sharp, light, liquid',
  'Kapha': 'Earth + Water dosha governing structure, lubrication, stability. Qualities: heavy, slow, cool, oily, stable',
  'Agni': 'Digestive fire; the metabolic fire that transforms food into energy and consciousness',
  'Ama': 'Toxic residue from undigested food, emotions, or experiences that accumulates in the body',
  'Prakriti': 'Birth constitution; unique balance of doshas determined at conception, remains constant',
  'Vikriti': 'Current state of doshic imbalance; deviation from natural Prakriti causing symptoms',
  'Ojas': 'Essence of perfect digestion; vital essence providing immunity, strength, radiance',
  'Prana': 'Life force energy; governs breath, circulation, consciousness throughout the body',
  'Tejas': 'Inner radiance; subtle essence of Pitta governing metabolism and cellular transformation',
  
  // Body Systems
  'Dhatu': 'The seven body tissues: Rasa (plasma), Rakta (blood), Mamsa (muscle), Meda (fat), Asthi (bone), Majja (marrow), Shukra (reproductive)',
  'Dhatus': 'The seven body tissues: Rasa (plasma), Rakta (blood), Mamsa (muscle), Meda (fat), Asthi (bone), Majja (marrow), Shukra (reproductive)',
  'Srotas': 'Body channels; pathways through which nutrients, waste, and energy flow',
  'Malas': 'Waste products; the three primary wastes are feces, urine, and sweat',
  'Koshas': 'Five sheaths of existence: physical, energetic, mental, wisdom, and bliss bodies',
  'Rasa': 'Plasma/lymph tissue; also means taste',
  'Rakta': 'Blood tissue',
  'Mamsa': 'Muscle tissue',
  'Meda': 'Adipose/fat tissue',
  'Asthi': 'Bone tissue',
  'Majja': 'Bone marrow and nerve tissue',
  'Shukra': 'Reproductive tissue',
  
  // Daily & Seasonal Practices
  'Dinacharya': 'Daily routine aligned with natural circadian rhythms to maintain health',
  'Ritucharya': 'Seasonal routine; adjusting diet and lifestyle according to six Ayurvedic seasons',
  'Brahma Muhurta': 'Auspicious pre-sunrise time (4-6 AM) ideal for waking and spiritual practices',
  'Vasanta': 'Spring season (March-April); Kapha accumulation time',
  'Grishma': 'Summer season (May-June); Pitta aggravation time',
  'Varsha': 'Monsoon season (July-August); Vata disturbance time',
  'Sharad': 'Autumn season (September-October); Pitta accumulation time',
  'Hemanta': 'Early winter (November-December); Kapha building time',
  'Shishira': 'Late winter (January-February); Vata and Kapha time',
  
  // Therapeutic Concepts
  'Rasayana': 'Rejuvenation therapy; herbs, foods, practices promoting longevity and vitality',
  'Panchakarma': 'Five purification procedures for deep detoxification and doshic balance',
  'Abhyanga': 'Self-massage with warm oil; foundational daily practice for nourishment',
  'Nasya': 'Nasal administration of medicated oils; cleanses head, neck, respiratory passages',
  'Basti': 'Medicated enema; most powerful Panchakarma therapy especially for Vata',
  'Vamana': 'Therapeutic vomiting; eliminates excess Kapha from upper body',
  'Virechana': 'Therapeutic purgation; eliminates excess Pitta from intestines',
  'Swedana': 'Herbal steam therapy; opens channels and promotes sweating',
  'Shirodhara': 'Warm oil poured on forehead; deeply calming for mind and nervous system',
  
  // Six Tastes (Rasas)
  'Madhura': 'Sweet taste; builds tissue, calms Vata and Pitta, increases Kapha (Earth + Water)',
  'Amla': 'Sour taste; stimulates digestion, increases Pitta and Kapha, calms Vata (Earth + Fire)',
  'Lavana': 'Salty taste; hydrating, increases Pitta and Kapha, calms Vata (Water + Fire)',
  'Katu': 'Pungent taste; heating and drying, increases Vata and Pitta, reduces Kapha (Fire + Air)',
  'Tikta': 'Bitter taste; cooling and detoxifying, increases Vata, reduces Pitta and Kapha (Air + Space)',
  'Kashaya': 'Astringent taste; drying and cooling, increases Vata, reduces Pitta and Kapha (Air + Earth)',
  
  // Qualities (Gunas)
  'Guru': 'Heavy quality; increases Kapha, reduces Vata',
  'Laghu': 'Light quality; increases Vata, reduces Kapha',
  'Ushna': 'Hot quality; increases Pitta, reduces Kapha and Vata',
  'Shita': 'Cold quality; increases Vata and Kapha, reduces Pitta',
  'Snigdha': 'Oily quality; increases Kapha and Pitta, reduces Vata',
  'Ruksha': 'Dry quality; increases Vata, reduces Kapha',
  'Manda': 'Slow quality; increases Kapha, reduces Vata and Pitta',
  'Tikshna': 'Sharp quality; increases Pitta, reduces Kapha',
  'Sthira': 'Stable quality; increases Kapha, reduces Vata',
  'Chala': 'Mobile quality; increases Vata, reduces Kapha',
  'Mridu': 'Soft quality; increases Pitta and Kapha, reduces Vata',
  'Kathina': 'Hard quality; increases Vata, reduces Pitta and Kapha',
  'Shlakshna': 'Smooth quality; increases Kapha and Pitta, reduces Vata',
  'Khara': 'Rough quality; increases Vata, reduces Kapha',
  'Sukshma': 'Subtle quality; increases Vata and Pitta, reduces Kapha',
  'Sthula': 'Gross quality; increases Kapha, reduces Vata',
  
  // Mind & Consciousness
  'Sattva': 'Quality of purity, balance, harmony, and clarity in mind',
  'Rajas': 'Quality of activity, passion, movement, and restlessness',
  'Tamas': 'Quality of inertia, darkness, heaviness, and ignorance',
  'Manas': 'Mind; the processing center of thoughts and emotions',
  'Buddhi': 'Intellect; discriminative faculty that makes wise decisions',
  'Chitta': 'Consciousness; storehouse of memories and impressions',
  
  // Common Herbs & Substances
  'Triphala': 'Three fruits blend (Amalaki, Bibhitaki, Haritaki); balances all doshas, gentle detoxifier',
  'Ashwagandha': 'Adaptogenic herb; builds strength, reduces stress, balances Vata',
  'Turmeric': 'Golden anti-inflammatory spice; purifies blood, reduces Kapha and Pitta',
  'Ginger': 'Universal medicine; kindles Agni, reduces Vata and Kapha',
  'Ghee': 'Clarified butter; nourishes tissues, lubricates joints, enhances Ojas',
  'Tulsi': 'Holy basil; adaptogen, respiratory support, spiritual herb',
  'Brahmi': 'Brain tonic; enhances memory, calms mind, supports nervous system',
  'Cumin': 'Digestive spice; kindles Agni without aggravating Pitta',
  'Coriander': 'Cooling herb; supports digestion, calms Pitta',
  'Fennel': 'Sweet cooling spice; digestive, calms all doshas',
  
  // Yoga & Pranayama
  'Pranayama': 'Breath control practices; regulates Prana and calms mind',
  'Nadi Shodhana': 'Alternate nostril breathing; balances left and right brain, all doshas',
  'Kapalabhati': 'Skull-shining breath; energizing, clears Kapha from lungs',
  'Bhastrika': 'Bellows breath; heating, increases Pitta, energizes',
  'Sheetali': 'Cooling breath; reduces Pitta, calms anger',
  'Ujjayi': 'Ocean breath; warming, calming, builds internal heat',
  'Asana': 'Yoga postures; physical practice to balance doshas and increase flexibility',
  
  // Miscellaneous
  'Satmya': 'What is suitable for one\'s constitution and habituation',
  'Asatmya': 'What is unsuitable or incompatible with one\'s constitution',
  'Viruddha': 'Incompatible food combinations that create Ama',
  'Ahara': 'Food; proper diet based on constitution',
  'Vihara': 'Lifestyle; proper daily routines and behaviors',
  'Nidra': 'Sleep; essential for rejuvenation and balance',
  'Sadvritta': 'Right conduct; ethical and wholesome lifestyle',
  'Achara': 'Code of conduct; proper behavior for health',
  'Ritu': 'Season; six seasons in Ayurvedic calendar',
  'Kala': 'Time; importance of proper timing in health',
  'Desha': 'Place/geography; influence of environment on health',
  'Samprapti': 'Pathogenesis; how disease develops in the body',
  'Nidana': 'Causes of disease; root factors creating imbalance'
};

// Helper function to find glossary terms in text
export const findGlossaryTerms = (text) => {
  const terms = [];
  const glossaryKeys = Object.keys(AYURVEDIC_GLOSSARY);
  
  // Sort by length (longest first) to match compound terms before simple ones
  const sortedKeys = glossaryKeys.sort((a, b) => b.length - a.length);
  
  sortedKeys.forEach(term => {
    // Case-insensitive word boundary search
    const regex = new RegExp(`\\b${term}\\b`, 'gi');
    if (regex.test(text)) {
      terms.push({
        term: term,
        definition: AYURVEDIC_GLOSSARY[term]
      });
    }
  });
  
  return terms;
};

// Helper function to wrap terms with markers for replacement
export const wrapGlossaryTerms = (text) => {
  let processedText = text;
  const glossaryKeys = Object.keys(AYURVEDIC_GLOSSARY);
  const sortedKeys = glossaryKeys.sort((a, b) => b.length - a.length);
  
  // Track already wrapped positions to avoid nested replacements
  const wrapped = new Set();
  
  sortedKeys.forEach(term => {
    const regex = new RegExp(`\\b(${term})\\b`, 'gi');
    processedText = processedText.replace(regex, (match, capture, offset) => {
      // Check if this position is already wrapped
      if (wrapped.has(offset)) {
        return match;
      }
      
      // Mark this range as wrapped
      for (let i = offset; i < offset + match.length; i++) {
        wrapped.add(i);
      }
      
      // Return marked text for later React component replacement
      return `<glossary-term data-term="${capture}" data-definition="${AYURVEDIC_GLOSSARY[term]}">${match}</glossary-term>`;
    });
  });
  
  return processedText;
};

export default AYURVEDIC_GLOSSARY;
